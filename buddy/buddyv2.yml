- pipeline: "Pipeline_UpdateAvada"
  on: "CLICK"
  refs:
  - ":default"
  fail_on_prepare_env_warning: true
  actions:
  - action: "wp @dev rewrite flush"
    type: "WP_CLI"
    version: "cli"
    execute_commands:
    - "#!/bin/bash"
    - ""
    - "# Variables"
    - "SOURCE_DIR=\"/test1/\""
    - "TARGET_REPO=\"https://github.com/jecci/FromServer.git\""
    - "TARGET_DIR=\"/\""
    - ""
    - "# Clean up any previous clone"
    - "rm -rf $TARGET_DIR"
    - ""
    - "# Clone the target repository"
    - "git clone $TARGET_REPO $TARGET_DIR"
    - ""
    - "# Copy the specific directory to the cloned repository"
    - "rsync -av --delete $SOURCE_DIR/ $TARGET_DIR/"
    - ""
    - "# Navigate to the cloned repository"
    - "cd $TARGET_DIR"
    - ""
    - "# Commit and push the changes"
    - "git add ."
    - "git commit -m \"Automated commit of specific directory\""
    - "git push origin main"
    - ""
    - "# Clean up"
    - "cd .."
    - "rm -rf $TARGET_DIR"
    shell: "BASH"
  - action: "FTP to Test1"
    type: "FTP"
    disabled: true
    local_path: "/Plugins/"
    remote_path: "/test1/"
    login: "landstack.io"
    password: "secure!y8EVoTOE1VkGBx/QyD2emQ==.n4QZyhoUhRKSgkQVfP27og=="
    host: "ftp.us.stackcp.com"
  - action: "FTP to Test2_baby"
    type: "FTP"
    disabled: true
    local_path: "/Plugins/"
    remote_path: "/test2/baby/"
    login: "landstack.io"
    password: "secure!y8EVoTOE1VkGBx/QyD2emQ==.n4QZyhoUhRKSgkQVfP27og=="
    host: "ftp.us.stackcp.com"
